<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="captura.css">
    <link rel="stylesheet" href="index.html">
    <link rel="stylesheet" href="captura.js">
    <link rel="shortcut icon" href="../I3/favicon_io/favicon-32x32.png" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="upload.php">
    <title>Captura</title>
</head>
<body>
    <img src="./img/i3-01[308].png" alt="">
    <div id="Registro">
        <h1>Registro de Unidad</h1>
        <h2>Empresa</h2>
        <div id="fechaHora">
            <p id="hora-actual"></p>
            <script>
                function actualizarHora() {
                  var horaActual = new Date();
                  var hora = horaActual.getHours();
                  var minutos = horaActual.getMinutes();
                  var segundos = horaActual.getSeconds();
                  var formatoHora = hora >= 12 ? "PM" : "AM";
                  
                  hora = hora % 12;
                  hora = hora ? hora : 12; 
                  minutos = minutos < 10 ? "0" + minutos : minutos;
                  segundos = segundos < 10 ? "0" + segundos : segundos;
                
                  var horaCompleta = hora + ":" + minutos + ":" + segundos + " " + formatoHora;
                  
                  document.getElementById("hora-actual").innerHTML = horaCompleta;
                }
                
                // Llamar a la función actualizarHora cada segundo para actualizar la hora
                setInterval(actualizarHora, 1000);
                </script>                
        </div>
        <div id="fecha">
            <p id="fecha-actual"></p>
            <script>
                function actualizarFecha() {
                  var fechaActual = new Date();
                  var dia = fechaActual.getDate();
                  var mes = fechaActual.getMonth() + 1;
                  var anio = fechaActual.getFullYear();
                  
                  var fechaCompleta = dia + "/" + mes + "/" + anio;
                  
                  document.getElementById("fecha-actual").innerHTML = fechaCompleta;
                }
                
                // Llamar a la función actualizarFecha una vez para actualizar la fecha al cargar la página
                actualizarFecha();
                
                // Llamar a la función actualizarFecha cada día a la medianoche para actualizar la fecha
                setInterval(function() {
                  var ahora = new Date();
                  if (ahora.getHours() === 0 && ahora.getMinutes() === 0 && ahora.getSeconds() === 0) {
                    actualizarFecha();
                  }
                }, 1000);
                </script>
                
        </div>
        <form action="">
            <div>
                <nav id="ES">
                  <br>
                  <label for="opciones">Carga/Descarga:</label>
                  <select id="opciones" name="opciones">
                    <option value="opcion1">Carga</option>
                    <option value="opcion2">Descarga</option>
                  </select><br><br>
                  <label for="opciones">Planta:</label>
                  <select id="opciones" name="opciones">
                    <option value="opcion1">Fugra</option>
                    <option value="opcion2">Presión</option>
                    <option value="opcion3">Plastitec</option>
                  </select>
                  <p></p>
                  <div id="operador" class="inf">
                    <label for="operador">Operador:</label>
                    <input type="text" id="operador" name="operador" required>
                  </div><br>
                  <div id="Tracto" class="inf">
                    <label for="Tracto">Tracto:</label>
                    <input type="text" id="Tracto" name="Tracto" required>
                  </div><br>
                  <div class="nubtractor">
                    <label for="N Tracto">N° Tracto:</label>
                    <input type="text" id="Tracto n" name="N Tracto" required>
                  </div><br>
                  <div class="placas">
                    <label for="placas">N° Placas:</label>
                    <input type="text" id="placas" name="placas" required>
                  </div><br>
                  <div id="caja1">
                    <label for="caja1">Caja 1:</label>
                    <input type="text" name="caja1" id="caja1">
                  </div><br>
                  <div id="caja2">
                    <label for="caja2">Caja 2:</label>
                    <input type="text" name="caja2" id="caja2">
                  </div><br>
                  <div>
                    <label for="Fallas">Fallas:</label>
                    <input type="text" name="Fallas" id="Fallas">
                  </div><br>
                  <div>
                    <label for="Peso Ingreso">Peso Ingreso o Salida:</label>
                    <input type="text" name="pI" id="pI">
                  </div><br>
                  <div class="defensa">
                    <label for="defensa">Defensa:</label>
                    <select name="defensa" id="defensa" style="font-size: 12px; height: 32px;">
                        <option value="A">Acepta</option>
                        <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Fallas" id="fallas1">
                  </div><br>
                  <div class="motor">
                    <label for="motor">Motor:</label>
                    <select name="motor" id="motor" style="font-size: 12px; height: 32px;">
                    <option value="A">Acepta</option>
                    <option value="B">Rechaza</option>
                    </select>
                    &nbsp &nbsp
                    <input type="text" name="fallas" id="fallas2">
                  </div><br>
                  <div class="Cabina">
                    <label for="Cabina">Cabina:</label>
                    <select name="Cabina" id="Cabina" style="font-size: 12px; height: 32px;">
                    <option value="A">Acepta</option>
                    <option value="B">Rechaza</option>
                    </select>
                    &nbsp &nbsp
                    <input type="text" name="Cabina" id="fallas3">
                  </div><br>
                  <div>
                    <label for="Camarote">Camarote:</label>
                    <select name="Camarote" id="Camarote" style="font-size: 12px; height: 32px;">
                    <option value="A">Acepta</option>
                    <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Camarote" id="Fallas4">
                  </div><br>
                  <div>
                    <label for="Tcb">Tanque de Combustible:</label>
                    <select name="Tcb" id="Tcb" style="font-size: 12px; height: 32px;">
                        <option value="A">Acepta</option>
                        <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Tcb" id="Fallas5">
                  </div><br>
                  <div class="Eje">
                    <label for="Eje">Eje:</label>
                    <select name="Eje" id="Eje" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Eje" id="Fallas6">
                  </div>
                  <br>
                  <div class="Aire">
                    <label for="Aire">Cilindros de Aire:</label>
                    <select name="Aire" id="Aire" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Aire" id="Fallas7">
                  </div><br>
                  <div>
                    <label for="Esc">Mofle / Escape:</label>
                    <select name="Esc" id="Esc" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Esc" id="Fallas8">
                  </div><br>
                  <div>
                    <label for="condiciones">Condiciones de Fitosanitarias / Limpieza Exterior:</label>
                    <select name="condiciones" id="cond" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="condiciones" id="Fallas9">
                  </div><br>
                  <div>
                    <label for="Pisos">Paredes y Pisos exteriores de caja:</label>
                    <select name="Pisos" id="Pisosext" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="ext" id="Fallas10">
                  </div><br>
                  <div>
                    <label for="Rueda">Quinta Rueda:</label>
                    <select name="Rueda" id="Rueda" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Rueda" id="Falla11">
                  </div><br>
                  <div>
                    <label for="Chasis">Chasis:</label>
                    <select name="Chasis" id="Chasis" style="font-size: 12px; height: 32px;">
                    <option value="A">Acepta</option>
                    <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="ch" id="Fallas12">
                  </div><br>
                  <div>
                    <label for="Llantas">Llantas:</label>
                    <select name="Llantas" id="Llantas" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Llantas" id="Fallas13">
                  </div><br>
                  <div>
                    <label for=" Puertas Traseras"> Puertas Traseras:</label>
                    <select name=" Puertas Traseras" id=" PuertasTraseras" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="Pt" id="Fallas14">
                  </div><br>
                  <div>
                    <label for=" Sello/Fleje"> Sello/Fleje:</label>
                    <select name=" Sello/Fleje" id="Sello" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="sf" id="Fallas15">
                  </div><br>
                  <div>
                    <label for="Tuercas">Bisagras, Remaches y Tuercas:</label>
                    <select name="Bisagras, Remaches y Tuercas" id="Tuercas" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="bis" id="Fallas16">
                  </div><br>
                  <div>
                    <label for="Techo">Techo Externo/Interno:</label>
                    <select name="Techo" id="TechoEx" style="font-size: 12px; height: 32px;">
                      <option value="A">Acepta</option>
                      <option value="B">Rechaza</option>
                    </select>
                    <input type="text" name="TE" id="Fallas17">
                  </div><br>
                  <!-- <button id="generarPDF">Generar PDF</button> -->
                </nav>
              </div>
              
                <script>
                  function generarPDF() {
  // Crear un nuevo objeto jsPDF
  var doc = new jsPDF();
  
  // Obtener los valores de los campos del formulario
  var cargaDescarga = document.getElementById("opciones").value;
  var planta = document.getElementById("opciones2").value;
  var operador = document.getElementById("operador").value;
  var tracto = document.getElementById("Tracto").value;
  var numTracto = document.getElementById("Tracto n").value;
  var placas = document.getElementById("placas").value;
  var caja1 = document.getElementById("caja1").value;
  var caja2 = document.getElementById("caja2").value;
  var fallas = document.getElementById("Fallas").value;
  var peso = document.getElementById("pI").value;
  var defensa = document.getElementById("defensa").value;
  var fallas1 = document.getElementById("fallas1").value;
  var motor = document.getElementById("motor").value;
  var fallas2 = document.getElementById("fallas2").value;
  var cabina = document.getElementById("Cabina").value;
  var fallas3 = document.getElementById("fallas3").value;
  var camarote = document.getElementById("Camarote").value;
  var fallas4 = document.getElementById("Fallas4").value;
  var tanque = document.getElementById("Tcb").value;
  var fallas5 = document.getElementById("Fallas5").value;
  var eje = document.getElementById("Eje").value;
  var fallas6 = document.getElementById("Fallas6").value;
  
  // Crear el contenido del PDF
  doc.text("Carga/Descarga: " + cargaDescarga, 10, 10);
  doc.text("Planta: " + planta, 10, 20);
  doc.text("Operador: " + operador, 10, 30);
  doc.text("Tracto: " + tracto, 10, 40);
  doc.text("Número de Tracto: " + numTracto, 10, 50);
  doc.text("Placas: " + placas, 10, 60);
  doc.text("Caja 1: " + caja1, 10, 70);
  doc.text("Caja 2: " + caja2, 10, 80);
  doc.text("Fallas: " + fallas, 10, 90);
  doc.text("Peso Ingreso o Salida: " + peso, 10, 100);
  doc.text("Defensa: " + defensa + " " + fallas1, 10, 110);
  doc.text("Motor: " + motor + " " + fallas2, 10, 120);
  doc.text("Cabina: " + cabina + " " + fallas3, 10, 130);
  doc.text("Camarote:" + camarote + " " + fallas4, 10, 140);
  
}

                </script>    
        </form>
    </div>
    <div>
        <!-- <button id="record-button">Grabar</button> -->
        <video id="video" width="320" height="240" controls></video>
        <button id="startButton">Iniciar video</button>
        <button id="stopButton">Detener video</button>
        
        <script>
              var video = document.getElementById("video");
    var startButton = document.getElementById("startButton");
    var stopButton = document.getElementById("stopButton");
    var mediaRecorder;
    var chunks = [];

    var constraints = {
        audio: true,
        video: {
            facingMode: { exact: "environment" }
        }
    };

    navigator.mediaDevices.getUserMedia(constraints)
        .then(function(stream) {
            video.srcObject = stream;
            mediaRecorder = new MediaRecorder(stream);

            startButton.addEventListener("click", function() {
                mediaRecorder.start();
            });

            stopButton.addEventListener("click", function() {
                mediaRecorder.stop();
            });

            mediaRecorder.ondataavailable = function(event) {
                chunks.push(event.data);
            };
        });
        </script>        
    </div>
     <label for="button">
        <a href="index.html"><button>Salir</button></a>
    </label>
    </div>
</body>
</html>
